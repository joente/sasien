'use strict';(function(){var a={};a.srepeat=function(a,b){return new Array(b+1).join(a);};a.zfill=function(b,c){return a.srepeat('0',c-b.length)+b;};a.shuffle=function(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a;};a.range=function(a){var b=[];for(var c=0;c<a;c++)b.push(c);return b;};a.take=function(a,b){var c=[];for(var d=0;d<b;d++){var e=a.pop();c.push(e);a.unshift(e);}return c;};a.repeat=function(a,b){var c=[];for(var d=0;d<b;d++)c.push((typeof a==='function')?a():a);return c;};a.getImgSrc=function(b,c,d){return '/static/img/{0}/{1}/{2}'.format(b,c,a.zfill('{0}.jpg'.format(d),12));};a.getImgId=function(a){return Number(a.substr(-12,8));};a.clickImage=function(a){var b=window.portfolio,c,d,e,f,g,h;for(c=0,d=b.length;c<d;c++){g=b[c];for(e=0,f=g.images.length;e<f;e++){h=g.images[e];if(h.id===a){window.location.hash='portfolio/{0}/{1}'.format(g.name,a);return;}}}};window.sasien=a;})();'use strict';(function(a,b){b.getWallImages=function(c){var d=[];a.each(c,function(c,e){a.each(e.images,function(a,c){if(c.wall)d.push(b.getImgSrc('wall',e.name,c.id));});});return d;};b.wall=function(c,d,e){var f={nWalls:9,nSwitch:2,interval:5000,startAfter:1500,speed:600};var g=a.extend({},f,e);var h=b.shuffle(b.range(g.nWalls)),i=b.repeat(true,g.nWalls),j,k;var l=[];for(k=0;k<g.nWalls;k++)l.push(['<div id="wall-{0}" class="col-xs-6 col-sm-4">'.format(k),'<span class="wall-img-0"></span>','<span class="wall-img-1"></span>','</div>'].join(''));c.addClass('row').html(l.join(''));d=b.shuffle(d);var m=function(){var c=a(this);var d=c.data('id');c.parent().css({cursor:'pointer'}).click(function(){b.clickImage(d);});};j=b.take(d,g.nWalls);for(k=0;k<g.nWalls;k++)a('#wall-{0} .wall-img-{1}'.format(k,Number(i[k]))).html('<img src="'+j[k]+'" />').data('id',b.getImgId(j[k])).hide(0,m).fadeIn(g.speed);var n=function(){var c=b.take(h,g.nSwitch),e=b.take(d,g.nSwitch);for(var f=0;f<g.nSwitch;f++){var j=c[f];a('#wall-{0}'.format(j)).css({cursor:'default'}).off('click');a('#wall-{0} .wall-img-{1}'.format(j,Number(!i[j]))).css({opacity:0}).html('<img src="'+e[f]+'" />').data('id',b.getImgId(e[f])).animate({opacity:1},g.speed,'linear',m);a('#wall-{0} .wall-img-{1}'.format(j,Number(i[j]))).animate({opacity:0},g.speed,'linear');i[j]=!i[j];}};var o={init:function(){var a=this;this.timeout=setTimeout(function(){n();a.start();},g.startAfter);},start:function(){this.interval=setInterval(n,g.interval);},stop:function(){clearInterval(this.interval);clearTimeout(this.timeout);}};o.init();return o;};})(window.jQuery,window.sasien);'use strict';(function(a,b){b.getGalleryIds=function(b,c){var d=[];a.each(b,function(b,e){if(e.name===c)a.each(e.images,function(a,b){d.push(b.id);});});return d;};var c=function(){return{elem:a('<ul>'),size:0};};var d=function(b,c){var d=0,e=b[d].size;for(var f=1,g=b.length;f<g;f++)if(b[f].size<e)d=f;b[d].elem.append(a('<li>').append(c));b[d].size+=c.height();};b.gallery=function(e,f,g,h){var i={nColumns:3};e.html('');var j=b.getGalleryIds(window.portfolio,f);var k=a.extend({},i,g);var l,m,n,o=0,p=j.length;var q=b.repeat(c,k.nColumns);var r=b.shuffle(j);for(l=0;l<k.nColumns;l++)e.append(a('<div class="col-xs-6 col-sm-4">').append(q[l].elem));var s=function(){d(q,a(this));o+=1;if(h&&o===p)h();};var t=function(){b.clickImage(a(this).data('id'));};for(l=0;l<p;l++){n=r[l];m=b.getImgSrc('gallery',f,n);a('<img>').attr({id:n,src:m}).data('id',n).click(t).load(s);}};})(window.jQuery,window.sasien);'use strict';String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return typeof a[c]!='undefined'?a[c]:b;});};$(document).ready(function(){$('.navbar-collapse a').not('.dropdown-toggle').click(function(){if($('.navbar-collapse').is(':visible')&&$('.navbar-toggle').is(':visible'))$('.navbar-collapse').collapse('toggle');});$('.footer [data-toggle="tooltip"]').tooltip().click(function(){$(this).tooltip('hide');});});'use strict';(function(a,b,c){var d;b.getJSON('/static/portfolio.json',function(b){window.portfolio=b;a({'':f,'home':f,'portfolio/:category':g,'portfolio/:category/:imageId':h,'about/:language':i,'*':function(){e('#page-not-found-view');}});}).fail(function(a){window.console.error('error in json data',a.responseText);});function e(a,c){if(d)d.stop();var e=b(a);if(e.length)b('#view').html(e.html());c=c||a;b('.navbar-nav li').removeClass('active');b('.navbar-nav li[data-target="'+c+'"]').addClass('active');}function f(){e('#home-view');var a={mobile:{nWalls:6,nSwitch:2},desktop:{nWalls:9,nSwitch:2}};var f=(b(window).width()<768)?a.mobile:a.desktop,g=b('#wall');d=c.wall(g,c.getWallImages(window.portfolio),f);b(window).off('resize').resize(function(){var e=(b(window).width()<768)?a.mobile:a.desktop;if(e!==f){f=e;if(d)d.stop();d=c.wall(g,c.getWallImages(window.portfolio),f);}});}function g(a,d){var f=b('#portfolio .gallery:first').first();if(f.data('category')===a)return;e('#portfolio-view',a);var g={mobile:{nColumns:2},desktop:{nColumns:3}};var h=(b(window).width()<768)?g.mobile:g.desktop;f=b('#portfolio .gallery').first();f.data('category',a);c.gallery(f,a,h,function(){b(window).off('resize').resize(function(){var d=(b(window).width()<768)?g.mobile:g.desktop;if(d!==h){h=d;c.gallery(f,a,h);}});if(d)d();});}function h(a,d){var e=b('#portfolio .gallery:first').first(),f=b('#portfolio .overlay').first(),i=b('#portfolio .single').first(),j=i.children('.close-button').first(),k=i.children('.prev-button').first(),l=i.children('.next-button').first();if(e.data('category')!==a){g(a,function(){h(a,d);});return;}var m=[],n=[],o,p,q,r;e.find('img').each(function(a,c){q=b(c);r=q.offset().top;for(o=0,p=n.length;o<p;o++)if(r<n[o])break;n.splice(o,0,r);m.splice(o,0,q.data('id'));});var s=m.indexOf(parseInt(d)),t=m.length-1,u=(s===0)?m[t]:m[s-1],v=(s===t)?m[0]:m[s+1];var w=function(){var c=b(this);window.location.hash='portfolio/{0}/{1}'.format(a,c.data('id'));b('#portfolio .single img').animate({opacity:0},100,function(){b(this).remove();});};k.data('id',u).off('click').click(w);l.data('id',v).off('click').click(w);j.data('id',d).off('click').click(function(){x(b(this).data('id'));i.hide();f.animate({opacity:0},400,function(){f.hide();window.location.hash='portfolio/{0}'.format(a);});b('#portfolio .single img').remove();});j.data('id',d).off('click').click(function(){b(document).off('keyup');x(b(this).data('id'));i.hide();f.animate({opacity:0},400,function(){f.hide();window.location.hash='portfolio/{0}'.format(a);});b('#portfolio .single img').remove();});var x=function(a){b('html, body').animate({scrollTop:b('#'+a).offset().top-8},400);};f.show().animate({opacity:0.95},400);i.show();b(document).off('keyup').keyup(function(a){if(a.keyCode==27)j.click();if(a.keyCode==37)k.click();if(a.keyCode==39||a.keyCode==32)l.click();});var y=c.getImgSrc('large',a,d);var z=function(){var a=b(this);a.on('swipeleft',function(){l.click();});a.on('swiperight',function(){k.click();});i.append(a);var c=a.width(),d=a.height(),e=c/d;var f=function(f,g){var h=b(window),i=h.width(),j=h.height(),k=i-100,l=j-60,m=k/l,n,o;if(m<e){n=Math.min(Math.max(k,50),c);o=Math.round(n/c*d);}else{o=Math.min(Math.max(l,50),d);n=Math.round(o/d*c);}if(g)a.css({top:Math.max((j/2)-(o/2),40),left:(i/2)-(n/2),width:n,height:o});else a.animate({top:Math.max((j/2)-(o/2),40),left:(i/2)-(n/2),width:n,height:o},100);};b(window).off('resize').resize(f);f(true,true);a.animate({opacity:1},500);};b('<img>').attr({src:y}).load(z);}function i(a){e('#about-{0}-view'.format(a));}})(window.routie,window.jQuery,window.sasien);